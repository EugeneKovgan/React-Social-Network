"use strict";(self.webpackChunkreact_social_network=self.webpackChunkreact_social_network||[]).push([[271],{271:function(e,s,a){a.r(s),a.d(s,{default:function(){return x}});var t=a(982),n=a(885),r={message:"ChatPage_message__42e2b",textBlock:"ChatPage_textBlock__Slh-z",header_block:"ChatPage_header_block__VcFu+",footer_block:"ChatPage_footer_block__HH-tW",info_block:"ChatPage_info_block__rSiUD"},c=a(657),o=a(791),i=a(810),l=a(184),u=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),d=function(){return(0,l.jsxs)("div",{className:r.chat,children:[(0,l.jsx)(f,{}),(0,l.jsx)(h,{})]})},h=function(){var e=(0,o.useState)([]),s=(0,n.Z)(e,2),a=s[0],c=s[1];return(0,o.useEffect)((function(){u.addEventListener("message",(function(e){var s=JSON.parse(e.data);c((function(e){return[].concat((0,t.Z)(e),(0,t.Z)(s))}))}))}),[]),(0,l.jsx)("div",{className:r.messages,children:(0,t.Z)(a).reverse().map((function(e){return(0,l.jsx)(_,{props:e},(0,i.Z)())}))})},_=function(e){var s=e.props;return(0,l.jsxs)("div",{className:r.message,children:[(0,l.jsxs)("div",{className:r.info_block,children:[(0,l.jsx)("img",{className:r.post_avatar,src:s.photo?s.photo:c,alt:"photo"}),(0,l.jsx)("p",{children:s.userName})]}),(0,l.jsxs)("div",{className:r.textBlock,children:[(0,l.jsx)("div",{className:r.header_block,children:(0,l.jsx)("p",{children:s.message})}),(0,l.jsx)("div",{className:r.footer_block})]})]})},f=function(){var e=(0,o.useState)(""),s=(0,n.Z)(e,2),a=s[0],t=s[1];return(0,l.jsxs)("div",{className:"AddMessageForm",children:[(0,l.jsx)("textarea",{onChange:function(e){return t(e.currentTarget.value)},value:a}),(0,l.jsx)("button",{onClick:function(){a&&(u.send(a),t(""))},children:"add"})]})},x=function(){return(0,l.jsx)("div",{children:(0,l.jsx)(d,{})})}}}]);
//# sourceMappingURL=271.875905f0.chunk.js.map